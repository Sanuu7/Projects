<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini API Chat</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        #chat-container { border: 1px solid #ccc; padding: 10px; max-width: 600px; margin-bottom: 20px;}
        .user-message { background-color: #e0f7fa; padding: 8px; margin-bottom: 5px; border-radius: 5px; text-align: right;}
        .gemini-message { background-color: #f0f0f0; padding: 8px; margin-bottom: 5px; border-radius: 5px;}
        textarea { width: 100%; padding: 10px; margin-bottom: 10px; box-sizing: border-box; }
        button { padding: 10px 20px; cursor: pointer; }
    </style>
</head>
<body>

    <h1>Gemini API Chat</h1>

    <div id="chat-container">
        <!-- Chat messages will appear here -->
    </div>

    <textarea id="user-input" placeholder="Type your message here..."></textarea>
    <button id="send-button">Send</button>


    <script>

      const apiKey = "YOUR_GEMINI_API_KEY"; // <<---  REPLACE WITH YOUR API KEY HERE!
      const model = "gemini-pro"; // Replace with the model you want to use

      const chatContainer = document.getElementById("chat-container");
      const userInput = document.getElementById("user-input");
      const sendButton = document.getElementById("send-button");

      sendButton.addEventListener('click', sendMessage);

      function displayMessage(message, sender) {
            const messageDiv = document.createElement("div");
              messageDiv.textContent = message;
              if(sender === "user"){
                  messageDiv.classList.add("user-message");
              } else {
                  messageDiv.classList.add("gemini-message");
              }
          
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight; // Auto scroll to bottom
          }

        async function sendMessage(){
            const userMessage = userInput.value;
          if(!userMessage.trim()){
            return;
          }
          displayMessage(userMessage, "user");
          userInput.value = "";
          
        try {
              const response = await fetch("https://generativelanguage.googleapis.com/v1beta/models/"+model+":generateContent?key="+apiKey, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                  },
                body: JSON.stringify({
                    contents: [{
                        parts: [{ text: userMessage }],
                      }],
                  }),
                });


                if (!response.ok) {
                  throw new Error(`HTTP error! status: ${response.status}`);
                }

              const data = await response.json();
             console.log("API Response:", data);
              
             const geminiResponse = data.candidates?.[0]?.content?.parts?.[0]?.text;
              if(geminiResponse){
                  displayMessage(geminiResponse, "gemini");
              } else {
                displayMessage("Sorry, I could not process your message.","gemini");
              }


          } catch (error) {
              console.error("Error communicating with the API:", error);
              displayMessage("Error communicating with the API","gemini")
          }
        }

    </script>
</body>
</html>
